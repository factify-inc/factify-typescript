/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import * as z from "zod/v4-mini";
import { remap as remap$ } from "../../lib/primitives.js";
import { blobLikeSchema } from "../../types/blobs.js";

export type FactifyApiV1betaCreateVersionRequestPayload = {
  fileName: string;
  content: ReadableStream<Uint8Array> | Blob | ArrayBuffer | Uint8Array;
};

/**
 * CreateVersionRequest contains the file and metadata for creating a version.
 */
export type FactifyApiV1betaCreateVersionRequest = {
  /**
   * Document ID to create version for.
   *
   * @remarks
   *  Pattern: doc_[0-9a-hjkmnp-tv-z]{26}
   */
  documentId?: string | undefined;
  /**
   * PDF file for new version
   */
  payload: FactifyApiV1betaCreateVersionRequestPayload | Blob;
  /**
   * Optional version title.
   */
  title?: string | null | undefined;
  /**
   * Description of changes in this version.
   */
  description?: string | null | undefined;
};

/** @internal */
export type FactifyApiV1betaCreateVersionRequestPayload$Outbound = {
  fileName: string;
  content: ReadableStream<Uint8Array> | Blob | ArrayBuffer | Uint8Array;
};

/** @internal */
export const FactifyApiV1betaCreateVersionRequestPayload$outboundSchema:
  z.ZodMiniType<
    FactifyApiV1betaCreateVersionRequestPayload$Outbound,
    FactifyApiV1betaCreateVersionRequestPayload
  > = z.object({
    fileName: z.string(),
    content: z.union([
      z.custom<ReadableStream<Uint8Array>>(x => x instanceof ReadableStream),
      z.custom<Blob>(x => x instanceof Blob),
      z.custom<ArrayBuffer>(x => x instanceof ArrayBuffer),
      z.custom<Uint8Array>(x => x instanceof Uint8Array),
    ]),
  });

export function factifyApiV1betaCreateVersionRequestPayloadToJSON(
  factifyApiV1betaCreateVersionRequestPayload:
    FactifyApiV1betaCreateVersionRequestPayload,
): string {
  return JSON.stringify(
    FactifyApiV1betaCreateVersionRequestPayload$outboundSchema.parse(
      factifyApiV1betaCreateVersionRequestPayload,
    ),
  );
}

/** @internal */
export type FactifyApiV1betaCreateVersionRequest$Outbound = {
  document_id?: string | undefined;
  payload: FactifyApiV1betaCreateVersionRequestPayload$Outbound | Blob;
  title?: string | null | undefined;
  description?: string | null | undefined;
};

/** @internal */
export const FactifyApiV1betaCreateVersionRequest$outboundSchema: z.ZodMiniType<
  FactifyApiV1betaCreateVersionRequest$Outbound,
  FactifyApiV1betaCreateVersionRequest
> = z.pipe(
  z.object({
    documentId: z.optional(z.string()),
    payload: z.union([
      z.lazy(() => FactifyApiV1betaCreateVersionRequestPayload$outboundSchema),
      blobLikeSchema,
    ]),
    title: z.optional(z.nullable(z.string())),
    description: z.optional(z.nullable(z.string())),
  }),
  z.transform((v) => {
    return remap$(v, {
      documentId: "document_id",
    });
  }),
);

export function factifyApiV1betaCreateVersionRequestToJSON(
  factifyApiV1betaCreateVersionRequest: FactifyApiV1betaCreateVersionRequest,
): string {
  return JSON.stringify(
    FactifyApiV1betaCreateVersionRequest$outboundSchema.parse(
      factifyApiV1betaCreateVersionRequest,
    ),
  );
}
